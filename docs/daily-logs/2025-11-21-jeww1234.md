# Daily Log

## 📌 Vercel에서 JSON 서버 배포하는 방법과 이유
### 1. Netlify + myjsonserver 방식
- Netlify는 정적 사이트만 배포 가능 → db.json을 직접 API처럼 쓸 수 없음
- 그래서 myjsonserver(typicode 서비스)를 이용해 GitHub 저장소의 db.json을 REST API처럼 노출
- 즉, URL만 바꿔서 API 호출이 가능했음 (myjsonserver.typicode.com/...)

### 2. Vercel의 구조
- Vercel은 Netlify와 달리 **API Routes(서버리스 함수)**를 지원
- 따라서 myjsonserver 같은 외부 서비스는 필요 없음
- 대신 pages/api/ 안에 JS 파일을 만들어 직접 API 엔드포인트를 구현해야 함
- 예: pages/api/emotionDiary.js → /api/emotionDiary 엔드포인트 자동 생성

### 3. 구현 방법
- 읽기 전용 JSON:
- public/db.json에 두면 https://your-app.vercel.app/db.json으로 접근 가능
- 단순 GET만 가능, 수정/삭제 불가
- 수정/삭제까지 지원:
- API Routes에서 GET, PATCH, DELETE 메서드를 처리하도록 구현
- 데이터는 let diaries = [...] 같은 임시 메모리 변수로 관리 (서버리스 함수라 영구 저장 불가)
- 영구 저장은 클라이언트 로컬스토리지에서 담당, 서버는 “수정/삭제 동작을 보여주는 용도”로만 사용

### 4. 이유
- Vercel은 서버리스 환경이라 **파일 쓰기(db.json 수정)**가 불가능 → 영구 저장 불가
- 따라서 JSON 서버를 그대로 배포할 수 없고, API Routes로 흉내내야 함
- 실제 저장은 로컬스토리지나 외부 DB(Firebase, Supabase 등)에 맡기고,
- Vercel API는 단순히 REST API 인터페이스 제공 역할만 수행

## 👉 결론:
- Netlify에서는 myjsonserver로 URL만 바꿔서 JSON 서버를 썼지만,
- Vercel에서는 반드시 API Routes를 만들어야 하고,
- 영구 저장은 로컬스토리지/외부 DB에서 처리, API는 수정·삭제 동작을 흉내내는 용도로 사용합니다.
